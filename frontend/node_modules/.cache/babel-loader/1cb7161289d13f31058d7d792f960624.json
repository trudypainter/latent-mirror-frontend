{"ast":null,"code":"var _jsxFileName = \"/Users/trudypainter/Desktop/latent internet mirror/frontend/src/HistoryItem.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from \"react\";\n// import { Billboard } from \"drei\";\nimport { Html } from \"@react-three/drei\";\nimport { Canvas, useFrame, useLoader } from \"react-three-fiber\";\nimport { TextureLoader } from \"three/src/loaders/TextureLoader.js\";\n\n// item box\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction HistoryItem(props) {\n  _s();\n  const SCALE = 10;\n  const k = 10;\n  function sigmoid(z) {\n    return 1 / (1 + Math.exp(-z / k));\n  }\n  // This reference will give us direct access to the mesh\n  const mesh = useRef();\n  // Set up state for the hovered and active state\n  const [hovered, setHover] = useState(false);\n  const itemSelected = props.canvasItems.includes(props.item);\n  const handleSphereClicked = () => {\n    if (!itemSelected) {\n      props.setCanvasItems([...props.canvasItems, props.item]);\n    }\n  };\n  const handlePointerIn = () => {\n    setHover(true);\n    props.setHoveredItem(props.item);\n  };\n  const handlePointerOut = () => {\n    setHover(false);\n    props.setHoveredItem(undefined);\n  };\n  let dim = props.item[\"visitCount\"] / 1000;\n  let x_item;\n  let y_item;\n  let z_item;\n  if (props.dimension == 3) {\n    y_item = props.item[\"3d_y\"] / SCALE;\n    x_item = props.item[\"3d_x\"] / SCALE;\n    z_item = props.item[\"3d_z\"] / SCALE;\n  } else {\n    y_item = 0;\n    x_item = props.item[\"2d_x\"] / SCALE;\n    z_item = props.item[\"2d_y\"] / SCALE;\n  }\n  let opacity = 0.3;\n  let color = \"gray\";\n  if (itemSelected) {\n    color = \"#3d5afe\";\n    opacity = 0.85;\n  }\n  if (hovered) {\n    color = \"purple\";\n    opacity = 0.8;\n  } else if (props.hoveredItem && props.item.url == props.hoveredItem.url) {\n    console.log(\"BOOM\");\n    color = \"#00e676\";\n    opacity = 1;\n    console.log(dim);\n    dim += 0.08;\n  }\n  let imgUrl = \"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg\";\n  if (props.item[\"favicon_url\"] !== \"\") {\n    // favicon url is not ico\n    if (props.item[\"favicon_url\"].substring(props.item[\"favicon_url\"] - 3) !== \"ico\") {\n      imgUrl = props.item[\"favicon_url\"];\n    }\n  } else if (props.item[\"favicon_ico\"] !== \"\") {\n    // favicon ico is not ico\n    if (props.item[\"favicon_ico\"].substring(props.item[\"favicon_ico\"] - 3) !== \"ico\") {\n      imgUrl = props.item[\"favicon_ico\"];\n    }\n  }\n  let texture = useLoader(TextureLoader, imgUrl);\n  return /*#__PURE__*/_jsxDEV(\"mesh\", {\n    ref: mesh,\n    onClick: event => handleSphereClicked(),\n    onPointerOver: event => handlePointerIn(),\n    onPointerOut: event => handlePointerOut(),\n    position: [x_item, y_item, z_item],\n    children: [/*#__PURE__*/_jsxDEV(\"boxGeometry\", {\n      args: [dim, dim, dim]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n      map: texture,\n      attach: \"material\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), hovered && /*#__PURE__*/_jsxDEV(Html, {\n      position: [0, 0, 0],\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"truncate\",\n        children: [props.item[\"description\"], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), props.item[\"url\"]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n_s(HistoryItem, \"ZLr5Q05iHssu7HZwFFh4yGkn+AE=\", false, function () {\n  return [useLoader];\n});\n_c = HistoryItem;\nexport default HistoryItem;\nvar _c;\n$RefreshReg$(_c, \"HistoryItem\");","map":{"version":3,"names":["useState","useRef","useEffect","Html","Canvas","useFrame","useLoader","TextureLoader","HistoryItem","props","SCALE","k","sigmoid","z","Math","exp","mesh","hovered","setHover","itemSelected","canvasItems","includes","item","handleSphereClicked","setCanvasItems","handlePointerIn","setHoveredItem","handlePointerOut","undefined","dim","x_item","y_item","z_item","dimension","opacity","color","hoveredItem","url","console","log","imgUrl","substring","texture","event"],"sources":["/Users/trudypainter/Desktop/latent internet mirror/frontend/src/HistoryItem.js"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\n// import { Billboard } from \"drei\";\nimport { Html } from \"@react-three/drei\";\nimport { Canvas, useFrame, useLoader } from \"react-three-fiber\";\nimport { TextureLoader } from \"three/src/loaders/TextureLoader.js\";\n\n// item box\nfunction HistoryItem(props) {\n  const SCALE = 10;\n\n  const k = 10;\n  function sigmoid(z) {\n    return 1 / (1 + Math.exp(-z / k));\n  }\n  // This reference will give us direct access to the mesh\n  const mesh = useRef();\n  // Set up state for the hovered and active state\n  const [hovered, setHover] = useState(false);\n  const itemSelected = props.canvasItems.includes(props.item);\n\n  const handleSphereClicked = () => {\n    if (!itemSelected) {\n      props.setCanvasItems([...props.canvasItems, props.item]);\n    }\n  };\n\n  const handlePointerIn = () => {\n    setHover(true);\n    props.setHoveredItem(props.item);\n  };\n\n  const handlePointerOut = () => {\n    setHover(false);\n    props.setHoveredItem(undefined);\n  };\n\n  let dim = props.item[\"visitCount\"] / 1000;\n  let x_item;\n  let y_item;\n  let z_item;\n\n  if (props.dimension == 3) {\n    y_item = props.item[\"3d_y\"] / SCALE;\n    x_item = props.item[\"3d_x\"] / SCALE;\n    z_item = props.item[\"3d_z\"] / SCALE;\n  } else {\n    y_item = 0;\n    x_item = props.item[\"2d_x\"] / SCALE;\n    z_item = props.item[\"2d_y\"] / SCALE;\n  }\n\n  let opacity = 0.3;\n  let color = \"gray\";\n\n  if (itemSelected) {\n    color = \"#3d5afe\";\n    opacity = 0.85;\n  }\n\n  if (hovered) {\n    color = \"purple\";\n    opacity = 0.8;\n  } else if (props.hoveredItem && props.item.url == props.hoveredItem.url) {\n    console.log(\"BOOM\");\n    color = \"#00e676\";\n    opacity = 1;\n    console.log(dim);\n    dim += 0.08;\n  }\n\n  let imgUrl =\n    \"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg\";\n  if (props.item[\"favicon_url\"] !== \"\") {\n    // favicon url is not ico\n    if (\n      props.item[\"favicon_url\"].substring(props.item[\"favicon_url\"] - 3) !==\n      \"ico\"\n    ) {\n      imgUrl = props.item[\"favicon_url\"];\n    }\n  } else if (props.item[\"favicon_ico\"] !== \"\") {\n    // favicon ico is not ico\n    if (\n      props.item[\"favicon_ico\"].substring(props.item[\"favicon_ico\"] - 3) !==\n      \"ico\"\n    ) {\n      imgUrl = props.item[\"favicon_ico\"];\n    }\n  }\n\n  let texture = useLoader(TextureLoader, imgUrl);\n\n  return (\n    <mesh\n      ref={mesh}\n      onClick={(event) => handleSphereClicked()}\n      onPointerOver={(event) => handlePointerIn()}\n      onPointerOut={(event) => handlePointerOut()}\n      position={[x_item, y_item, z_item]}\n    >\n      <boxGeometry args={[dim, dim, dim]} />\n      {/* <meshStandardMaterial\n        color={color}\n        transparent={true}\n        opacity={opacity}\n      /> */}\n      <meshStandardMaterial map={texture} attach=\"material\" />\n\n      {hovered && (\n        <Html position={[0, 0, 0]}>\n          <p className=\"truncate\">\n            {props.item[\"description\"]}\n            <br />\n            {props.item[\"url\"]}\n          </p>\n        </Html>\n      )}\n    </mesh>\n  );\n}\n\nexport default HistoryItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}