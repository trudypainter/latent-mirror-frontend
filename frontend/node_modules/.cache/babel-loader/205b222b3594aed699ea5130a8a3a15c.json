{"ast":null,"code":"import _classCallCheck from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport TempNode from '../core/TempNode.js';\nvar OperatorNode = /*#__PURE__*/function (_TempNode) {\n  _inherits(OperatorNode, _TempNode);\n  var _super = _createSuper(OperatorNode);\n  function OperatorNode(op, aNode, bNode) {\n    var _this;\n    _classCallCheck(this, OperatorNode);\n    _this = _super.call(this);\n    _this.op = op;\n    if ((arguments.length <= 3 ? 0 : arguments.length - 3) > 0) {\n      var finalBNode = bNode;\n      for (var i = 0; i < (arguments.length <= 3 ? 0 : arguments.length - 3); i++) {\n        finalBNode = new OperatorNode(op, finalBNode, i + 3 < 3 || arguments.length <= i + 3 ? undefined : arguments[i + 3]);\n      }\n      bNode = finalBNode;\n    }\n    _this.aNode = aNode;\n    _this.bNode = bNode;\n    return _this;\n  }\n  _createClass(OperatorNode, [{\n    key: \"getNodeType\",\n    value: function getNodeType(builder, output) {\n      var op = this.op;\n      var aNode = this.aNode;\n      var bNode = this.bNode;\n      var typeA = aNode.getNodeType(builder);\n      var typeB = bNode.getNodeType(builder);\n      if (typeA === 'void' || typeB === 'void') {\n        return 'void';\n      } else if (op === '=' || op === '%') {\n        return typeA;\n      } else if (op === '&' || op === '|' || op === '^' || op === '>>' || op === '<<') {\n        return 'int';\n      } else if (op === '==' || op === '&&' || op === '||' || op === '^^') {\n        return 'bool';\n      } else if (op === '<' || op === '>' || op === '<=' || op === '>=') {\n        var typeLength = builder.getTypeLength(output);\n        return typeLength > 1 ? \"bvec\".concat(typeLength) : 'bool';\n      } else {\n        if (typeA === 'float' && builder.isMatrix(typeB)) {\n          return typeB;\n        } else if (builder.isMatrix(typeA) && builder.isVector(typeB)) {\n          // matrix x vector\n          return builder.getVectorFromMatrix(typeA);\n        } else if (builder.isVector(typeA) && builder.isMatrix(typeB)) {\n          // vector x matrix\n          return builder.getVectorFromMatrix(typeB);\n        } else if (builder.getTypeLength(typeB) > builder.getTypeLength(typeA)) {\n          // anytype x anytype: use the greater length vector\n          return typeB;\n        }\n        return typeA;\n      }\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder, output) {\n      var op = this.op;\n      var aNode = this.aNode;\n      var bNode = this.bNode;\n      var type = this.getNodeType(builder, output);\n      var typeA = null;\n      var typeB = null;\n      if (type !== 'void') {\n        typeA = aNode.getNodeType(builder);\n        typeB = bNode.getNodeType(builder);\n        if (op === '=') {\n          typeB = typeA;\n        } else if (op === '<' || op === '>' || op === '<=' || op === '>=') {\n          if (builder.isVector(typeA)) {\n            typeB = typeA;\n          } else {\n            typeA = typeB = 'float';\n          }\n        } else if (builder.isMatrix(typeA) && builder.isVector(typeB)) {\n          // matrix x vector\n          typeB = builder.getVectorFromMatrix(typeA);\n        } else if (builder.isVector(typeA) && builder.isMatrix(typeB)) {\n          // vector x matrix\n          typeA = builder.getVectorFromMatrix(typeB);\n        } else {\n          // anytype x anytype\n          typeA = typeB = type;\n        }\n      } else {\n        typeA = typeB = type;\n      }\n      var a = aNode.build(builder, typeA);\n      var b = bNode.build(builder, typeB);\n      var outputLength = builder.getTypeLength(output);\n      if (output !== 'void') {\n        if (op === '=') {\n          builder.addFlowCode(\"\".concat(a, \" \").concat(this.op, \" \").concat(b));\n          return a;\n        } else if (op === '>' && outputLength > 1) {\n          return builder.format(\"\".concat(builder.getMethod('greaterThan'), \"( \").concat(a, \", \").concat(b, \" )\"), type, output);\n        } else if (op === '<=' && outputLength > 1) {\n          return builder.format(\"\".concat(builder.getMethod('lessThanEqual'), \"( \").concat(a, \", \").concat(b, \" )\"), type, output);\n        } else {\n          return builder.format(\"( \".concat(a, \" \").concat(this.op, \" \").concat(b, \" )\"), type, output);\n        }\n      } else if (typeA !== 'void') {\n        return builder.format(\"\".concat(a, \" \").concat(this.op, \" \").concat(b), type, output);\n      }\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize(data) {\n      _get(_getPrototypeOf(OperatorNode.prototype), \"serialize\", this).call(this, data);\n      data.op = this.op;\n    }\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(data) {\n      _get(_getPrototypeOf(OperatorNode.prototype), \"deserialize\", this).call(this, data);\n      this.op = data.op;\n    }\n  }]);\n  return OperatorNode;\n}(TempNode);\nexport default OperatorNode;","map":{"version":3,"names":["TempNode","OperatorNode","op","aNode","bNode","finalBNode","i","builder","output","typeA","getNodeType","typeB","typeLength","getTypeLength","isMatrix","isVector","getVectorFromMatrix","type","a","build","b","outputLength","addFlowCode","format","getMethod","data"],"sources":["/Users/trudypainter/Desktop/latent-2/frontend/node_modules/three-stdlib/nodes/math/OperatorNode.js"],"sourcesContent":["import TempNode from '../core/TempNode.js';\n\nclass OperatorNode extends TempNode {\n  constructor(op, aNode, bNode, ...params) {\n    super();\n    this.op = op;\n\n    if (params.length > 0) {\n      let finalBNode = bNode;\n\n      for (let i = 0; i < params.length; i++) {\n        finalBNode = new OperatorNode(op, finalBNode, params[i]);\n      }\n\n      bNode = finalBNode;\n    }\n\n    this.aNode = aNode;\n    this.bNode = bNode;\n  }\n\n  getNodeType(builder, output) {\n    const op = this.op;\n    const aNode = this.aNode;\n    const bNode = this.bNode;\n    const typeA = aNode.getNodeType(builder);\n    const typeB = bNode.getNodeType(builder);\n\n    if (typeA === 'void' || typeB === 'void') {\n      return 'void';\n    } else if (op === '=' || op === '%') {\n      return typeA;\n    } else if (op === '&' || op === '|' || op === '^' || op === '>>' || op === '<<') {\n      return 'int';\n    } else if (op === '==' || op === '&&' || op === '||' || op === '^^') {\n      return 'bool';\n    } else if (op === '<' || op === '>' || op === '<=' || op === '>=') {\n      const typeLength = builder.getTypeLength(output);\n      return typeLength > 1 ? `bvec${typeLength}` : 'bool';\n    } else {\n      if (typeA === 'float' && builder.isMatrix(typeB)) {\n        return typeB;\n      } else if (builder.isMatrix(typeA) && builder.isVector(typeB)) {\n        // matrix x vector\n        return builder.getVectorFromMatrix(typeA);\n      } else if (builder.isVector(typeA) && builder.isMatrix(typeB)) {\n        // vector x matrix\n        return builder.getVectorFromMatrix(typeB);\n      } else if (builder.getTypeLength(typeB) > builder.getTypeLength(typeA)) {\n        // anytype x anytype: use the greater length vector\n        return typeB;\n      }\n\n      return typeA;\n    }\n  }\n\n  generate(builder, output) {\n    const op = this.op;\n    const aNode = this.aNode;\n    const bNode = this.bNode;\n    const type = this.getNodeType(builder, output);\n    let typeA = null;\n    let typeB = null;\n\n    if (type !== 'void') {\n      typeA = aNode.getNodeType(builder);\n      typeB = bNode.getNodeType(builder);\n\n      if (op === '=') {\n        typeB = typeA;\n      } else if (op === '<' || op === '>' || op === '<=' || op === '>=') {\n        if (builder.isVector(typeA)) {\n          typeB = typeA;\n        } else {\n          typeA = typeB = 'float';\n        }\n      } else if (builder.isMatrix(typeA) && builder.isVector(typeB)) {\n        // matrix x vector\n        typeB = builder.getVectorFromMatrix(typeA);\n      } else if (builder.isVector(typeA) && builder.isMatrix(typeB)) {\n        // vector x matrix\n        typeA = builder.getVectorFromMatrix(typeB);\n      } else {\n        // anytype x anytype\n        typeA = typeB = type;\n      }\n    } else {\n      typeA = typeB = type;\n    }\n\n    const a = aNode.build(builder, typeA);\n    const b = bNode.build(builder, typeB);\n    const outputLength = builder.getTypeLength(output);\n\n    if (output !== 'void') {\n      if (op === '=') {\n        builder.addFlowCode(`${a} ${this.op} ${b}`);\n        return a;\n      } else if (op === '>' && outputLength > 1) {\n        return builder.format(`${builder.getMethod('greaterThan')}( ${a}, ${b} )`, type, output);\n      } else if (op === '<=' && outputLength > 1) {\n        return builder.format(`${builder.getMethod('lessThanEqual')}( ${a}, ${b} )`, type, output);\n      } else {\n        return builder.format(`( ${a} ${this.op} ${b} )`, type, output);\n      }\n    } else if (typeA !== 'void') {\n      return builder.format(`${a} ${this.op} ${b}`, type, output);\n    }\n  }\n\n  serialize(data) {\n    super.serialize(data);\n    data.op = this.op;\n  }\n\n  deserialize(data) {\n    super.deserialize(data);\n    this.op = data.op;\n  }\n\n}\n\nexport default OperatorNode;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}