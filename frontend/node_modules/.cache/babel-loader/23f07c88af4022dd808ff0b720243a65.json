{"ast":null,"code":"import _toConsumableArray from\"/Users/trudypainter/Desktop/latent internet mirror/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/trudypainter/Desktop/latent internet mirror/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef,useEffect}from\"react\";// import { Billboard } from \"drei\";\nimport{Html}from\"@react-three/drei\";import{Canvas,useFrame,useLoader}from\"react-three-fiber\";import{TextureLoader}from\"three/src/loaders/TextureLoader.js\";// item box\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function HistoryItem(props){var SCALE=10;var k=10;function sigmoid(z){return 1/(1+Math.exp(-z/k));}// This reference will give us direct access to the mesh\nvar mesh=useRef();// Set up state for the hovered and active state\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),hovered=_useState2[0],setHover=_useState2[1];var itemSelected=props.canvasItems.includes(props.item);var handleSphereClicked=function handleSphereClicked(){if(!itemSelected){props.setCanvasItems([].concat(_toConsumableArray(props.canvasItems),[props.item]));}};var handlePointerIn=function handlePointerIn(){setHover(true);props.setHoveredItem(props.item);};var handlePointerOut=function handlePointerOut(){setHover(false);props.setHoveredItem(undefined);};var dim=props.item[\"visitCount\"]/1000;var x_item;var y_item;var z_item;if(props.dimension==3){y_item=props.item[\"3d_y\"]/SCALE;x_item=props.item[\"3d_x\"]/SCALE;z_item=props.item[\"3d_z\"]/SCALE;}else{y_item=0;x_item=props.item[\"2d_x\"]/SCALE;z_item=props.item[\"2d_y\"]/SCALE;}var opacity=0.3;var color=\"gray\";if(itemSelected){color=\"#3d5afe\";opacity=0.85;}if(hovered){color=\"purple\";opacity=0.8;}else if(props.hoveredItem&&props.item.url==props.hoveredItem.url){console.log(\"BOOM\");color=\"#00e676\";opacity=1;console.log(dim);dim+=0.08;}// check if valid ending img url\nvar imgUrl=\"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg\";if(props.item[\"favicon_url\"]!==\"\"){// favicon url is not ico\nif(props.item[\"favicon_url\"].substring(props.item[\"favicon_url\"].length-3)!==\"ico\"){imgUrl=props.item[\"favicon_url\"];}if(props.item[\"favicon_ico\"]!==\"\"){// favicon ico is not ico\nif(props.item[\"favicon_ico\"].substring(props.item[\"favicon_ico\"].length-3)!==\"ico\"){imgUrl=props.item[\"favicon_ico\"];}}}texture=useLoader(TextureLoader,imgUrl);return/*#__PURE__*/_jsxs(\"mesh\",{ref:mesh,onClick:function onClick(event){return handleSphereClicked();},onPointerOver:function onPointerOver(event){return handlePointerIn();},onPointerOut:function onPointerOut(event){return handlePointerOut();},position:[x_item,y_item,z_item],children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[dim,dim,dim]}),/*#__PURE__*/_jsx(\"meshStandardMaterial\",{map:texture,attach:\"material\"}),hovered&&/*#__PURE__*/_jsx(Html,{position:[0,0,0],children:/*#__PURE__*/_jsxs(\"p\",{className:\"truncate\",children:[props.item[\"description\"],/*#__PURE__*/_jsx(\"br\",{}),props.item[\"url\"]]})})]});}export default HistoryItem;","map":{"version":3,"names":["useState","useRef","useEffect","Html","Canvas","useFrame","useLoader","TextureLoader","HistoryItem","props","SCALE","k","sigmoid","z","Math","exp","mesh","hovered","setHover","itemSelected","canvasItems","includes","item","handleSphereClicked","setCanvasItems","handlePointerIn","setHoveredItem","handlePointerOut","undefined","dim","x_item","y_item","z_item","dimension","opacity","color","hoveredItem","url","console","log","imgUrl","substring","length","texture","event"],"sources":["/Users/trudypainter/Desktop/latent internet mirror/frontend/src/HistoryItem.js"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\n// import { Billboard } from \"drei\";\nimport { Html } from \"@react-three/drei\";\nimport { Canvas, useFrame, useLoader } from \"react-three-fiber\";\nimport { TextureLoader } from \"three/src/loaders/TextureLoader.js\";\n\n// item box\nfunction HistoryItem(props) {\n  const SCALE = 10;\n\n  const k = 10;\n  function sigmoid(z) {\n    return 1 / (1 + Math.exp(-z / k));\n  }\n  // This reference will give us direct access to the mesh\n  const mesh = useRef();\n  // Set up state for the hovered and active state\n  const [hovered, setHover] = useState(false);\n  const itemSelected = props.canvasItems.includes(props.item);\n\n  const handleSphereClicked = () => {\n    if (!itemSelected) {\n      props.setCanvasItems([...props.canvasItems, props.item]);\n    }\n  };\n\n  const handlePointerIn = () => {\n    setHover(true);\n    props.setHoveredItem(props.item);\n  };\n\n  const handlePointerOut = () => {\n    setHover(false);\n    props.setHoveredItem(undefined);\n  };\n\n  let dim = props.item[\"visitCount\"] / 1000;\n  let x_item;\n  let y_item;\n  let z_item;\n\n  if (props.dimension == 3) {\n    y_item = props.item[\"3d_y\"] / SCALE;\n    x_item = props.item[\"3d_x\"] / SCALE;\n    z_item = props.item[\"3d_z\"] / SCALE;\n  } else {\n    y_item = 0;\n    x_item = props.item[\"2d_x\"] / SCALE;\n    z_item = props.item[\"2d_y\"] / SCALE;\n  }\n\n  let opacity = 0.3;\n  let color = \"gray\";\n\n  if (itemSelected) {\n    color = \"#3d5afe\";\n    opacity = 0.85;\n  }\n\n  if (hovered) {\n    color = \"purple\";\n    opacity = 0.8;\n  } else if (props.hoveredItem && props.item.url == props.hoveredItem.url) {\n    console.log(\"BOOM\");\n    color = \"#00e676\";\n    opacity = 1;\n    console.log(dim);\n    dim += 0.08;\n  }\n\n  // check if valid ending img url\n  let imgUrl =\n    \"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg\";\n  if (props.item[\"favicon_url\"] !== \"\") {\n    // favicon url is not ico\n    if (\n      props.item[\"favicon_url\"].substring(\n        props.item[\"favicon_url\"].length - 3\n      ) !== \"ico\"\n    ) {\n      imgUrl = props.item[\"favicon_url\"];\n    }\n    if (props.item[\"favicon_ico\"] !== \"\") {\n      // favicon ico is not ico\n      if (\n        props.item[\"favicon_ico\"].substring(\n          props.item[\"favicon_ico\"].length - 3\n        ) !== \"ico\"\n      ) {\n        imgUrl = props.item[\"favicon_ico\"];\n      }\n    }\n  }\n\n  texture = useLoader(TextureLoader, imgUrl);\n\n  return (\n    <mesh\n      ref={mesh}\n      onClick={(event) => handleSphereClicked()}\n      onPointerOver={(event) => handlePointerIn()}\n      onPointerOut={(event) => handlePointerOut()}\n      position={[x_item, y_item, z_item]}\n    >\n      <boxGeometry args={[dim, dim, dim]} />\n      {/* <meshStandardMaterial\n        color={color}\n        transparent={true}\n        opacity={opacity}\n      /> */}\n      <meshStandardMaterial map={texture} attach=\"material\" />\n\n      {hovered && (\n        <Html position={[0, 0, 0]}>\n          <p className=\"truncate\">\n            {props.item[\"description\"]}\n            <br />\n            {props.item[\"url\"]}\n          </p>\n        </Html>\n      )}\n    </mesh>\n  );\n}\n\nexport default HistoryItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}