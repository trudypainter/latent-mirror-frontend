{"ast":null,"code":"import _classCallCheck from \"/Users/trudypainter/Desktop/latent internet mirror/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/trudypainter/Desktop/latent internet mirror/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/trudypainter/Desktop/latent internet mirror/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/trudypainter/Desktop/latent internet mirror/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/trudypainter/Desktop/latent internet mirror/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { WebGLRenderTarget, NearestFilter, MeshDepthMaterial, RGBADepthPacking, NoBlending, UniformsUtils, ShaderMaterial, Color } from 'three';\nimport { BokehShader } from '../shaders/BokehShader.js';\nvar BokehPass = /*#__PURE__*/function (_Pass) {\n  _inherits(BokehPass, _Pass);\n  var _super = _createSuper(BokehPass);\n  function BokehPass(scene, camera, params) {\n    var _this;\n    _classCallCheck(this, BokehPass);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"scene\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"camera\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"renderTargetDepth\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"materialDepth\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"materialBokeh\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"fsQuad\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_oldClearColor\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"uniforms\", void 0);\n    _this.scene = scene;\n    _this.camera = camera;\n    var focus = params.focus !== undefined ? params.focus : 1.0;\n    var aspect = params.aspect !== undefined ? params.aspect : camera.aspect;\n    var aperture = params.aperture !== undefined ? params.aperture : 0.025;\n    var maxblur = params.maxblur !== undefined ? params.maxblur : 1.0; // render targets\n\n    var width = params.width || window.innerWidth || 1;\n    var height = params.height || window.innerHeight || 1;\n    _this.renderTargetDepth = new WebGLRenderTarget(width, height, {\n      minFilter: NearestFilter,\n      magFilter: NearestFilter\n    });\n    _this.renderTargetDepth.texture.name = 'BokehPass.depth'; // depth material\n\n    _this.materialDepth = new MeshDepthMaterial();\n    _this.materialDepth.depthPacking = RGBADepthPacking;\n    _this.materialDepth.blending = NoBlending; // bokeh material\n\n    if (BokehShader === undefined) {\n      console.error('BokehPass relies on BokehShader');\n    }\n    var bokehShader = BokehShader;\n    var bokehUniforms = UniformsUtils.clone(bokehShader.uniforms);\n    bokehUniforms['tDepth'].value = _this.renderTargetDepth.texture;\n    bokehUniforms['focus'].value = focus;\n    bokehUniforms['aspect'].value = aspect;\n    bokehUniforms['aperture'].value = aperture;\n    bokehUniforms['maxblur'].value = maxblur;\n    bokehUniforms['nearClip'].value = camera.near;\n    bokehUniforms['farClip'].value = camera.far;\n    _this.materialBokeh = new ShaderMaterial({\n      defines: Object.assign({}, bokehShader.defines),\n      uniforms: bokehUniforms,\n      vertexShader: bokehShader.vertexShader,\n      fragmentShader: bokehShader.fragmentShader\n    });\n    _this.uniforms = bokehUniforms;\n    _this.needsSwap = false;\n    _this.fsQuad = new FullScreenQuad(_this.materialBokeh);\n    _this._oldClearColor = new Color();\n    return _this;\n  }\n  _createClass(BokehPass, [{\n    key: \"render\",\n    value: function render(renderer, writeBuffer, readBuffer\n    /*, deltaTime, maskActive */) {\n      // Render depth into texture\n      this.scene.overrideMaterial = this.materialDepth;\n      renderer.getClearColor(this._oldClearColor);\n      var oldClearAlpha = renderer.getClearAlpha();\n      var oldAutoClear = renderer.autoClear;\n      renderer.autoClear = false;\n      renderer.setClearColor(0xffffff);\n      renderer.setClearAlpha(1.0);\n      renderer.setRenderTarget(this.renderTargetDepth);\n      renderer.clear();\n      renderer.render(this.scene, this.camera); // Render bokeh composite\n\n      this.uniforms['tColor'].value = readBuffer.texture;\n      this.uniforms['nearClip'].value = this.camera.near;\n      this.uniforms['farClip'].value = this.camera.far;\n      if (this.renderToScreen) {\n        renderer.setRenderTarget(null);\n        this.fsQuad.render(renderer);\n      } else {\n        renderer.setRenderTarget(writeBuffer);\n        renderer.clear();\n        this.fsQuad.render(renderer);\n      }\n      this.scene.overrideMaterial = null;\n      renderer.setClearColor(this._oldClearColor);\n      renderer.setClearAlpha(oldClearAlpha);\n      renderer.autoClear = oldAutoClear;\n    }\n  }]);\n  return BokehPass;\n}(Pass);\nexport { BokehPass };","map":{"version":3,"names":["_defineProperty","Pass","FullScreenQuad","WebGLRenderTarget","NearestFilter","MeshDepthMaterial","RGBADepthPacking","NoBlending","UniformsUtils","ShaderMaterial","Color","BokehShader","BokehPass","scene","camera","params","focus","undefined","aspect","aperture","maxblur","width","window","innerWidth","height","innerHeight","renderTargetDepth","minFilter","magFilter","texture","name","materialDepth","depthPacking","blending","console","error","bokehShader","bokehUniforms","clone","uniforms","value","near","far","materialBokeh","defines","Object","assign","vertexShader","fragmentShader","needsSwap","fsQuad","_oldClearColor","renderer","writeBuffer","readBuffer","overrideMaterial","getClearColor","oldClearAlpha","getClearAlpha","oldAutoClear","autoClear","setClearColor","setClearAlpha","setRenderTarget","clear","render","renderToScreen"],"sources":["/Users/trudypainter/Desktop/latent internet mirror/frontend/node_modules/three-stdlib/postprocessing/BokehPass.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { WebGLRenderTarget, NearestFilter, MeshDepthMaterial, RGBADepthPacking, NoBlending, UniformsUtils, ShaderMaterial, Color } from 'three';\nimport { BokehShader } from '../shaders/BokehShader.js';\n\nclass BokehPass extends Pass {\n  constructor(scene, camera, params) {\n    super();\n\n    _defineProperty(this, \"scene\", void 0);\n\n    _defineProperty(this, \"camera\", void 0);\n\n    _defineProperty(this, \"renderTargetDepth\", void 0);\n\n    _defineProperty(this, \"materialDepth\", void 0);\n\n    _defineProperty(this, \"materialBokeh\", void 0);\n\n    _defineProperty(this, \"fsQuad\", void 0);\n\n    _defineProperty(this, \"_oldClearColor\", void 0);\n\n    _defineProperty(this, \"uniforms\", void 0);\n\n    this.scene = scene;\n    this.camera = camera;\n    const focus = params.focus !== undefined ? params.focus : 1.0;\n    const aspect = params.aspect !== undefined ? params.aspect : camera.aspect;\n    const aperture = params.aperture !== undefined ? params.aperture : 0.025;\n    const maxblur = params.maxblur !== undefined ? params.maxblur : 1.0; // render targets\n\n    const width = params.width || window.innerWidth || 1;\n    const height = params.height || window.innerHeight || 1;\n    this.renderTargetDepth = new WebGLRenderTarget(width, height, {\n      minFilter: NearestFilter,\n      magFilter: NearestFilter\n    });\n    this.renderTargetDepth.texture.name = 'BokehPass.depth'; // depth material\n\n    this.materialDepth = new MeshDepthMaterial();\n    this.materialDepth.depthPacking = RGBADepthPacking;\n    this.materialDepth.blending = NoBlending; // bokeh material\n\n    if (BokehShader === undefined) {\n      console.error('BokehPass relies on BokehShader');\n    }\n\n    const bokehShader = BokehShader;\n    const bokehUniforms = UniformsUtils.clone(bokehShader.uniforms);\n    bokehUniforms['tDepth'].value = this.renderTargetDepth.texture;\n    bokehUniforms['focus'].value = focus;\n    bokehUniforms['aspect'].value = aspect;\n    bokehUniforms['aperture'].value = aperture;\n    bokehUniforms['maxblur'].value = maxblur;\n    bokehUniforms['nearClip'].value = camera.near;\n    bokehUniforms['farClip'].value = camera.far;\n    this.materialBokeh = new ShaderMaterial({\n      defines: Object.assign({}, bokehShader.defines),\n      uniforms: bokehUniforms,\n      vertexShader: bokehShader.vertexShader,\n      fragmentShader: bokehShader.fragmentShader\n    });\n    this.uniforms = bokehUniforms;\n    this.needsSwap = false;\n    this.fsQuad = new FullScreenQuad(this.materialBokeh);\n    this._oldClearColor = new Color();\n  }\n\n  render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    // Render depth into texture\n    this.scene.overrideMaterial = this.materialDepth;\n    renderer.getClearColor(this._oldClearColor);\n    const oldClearAlpha = renderer.getClearAlpha();\n    const oldAutoClear = renderer.autoClear;\n    renderer.autoClear = false;\n    renderer.setClearColor(0xffffff);\n    renderer.setClearAlpha(1.0);\n    renderer.setRenderTarget(this.renderTargetDepth);\n    renderer.clear();\n    renderer.render(this.scene, this.camera); // Render bokeh composite\n\n    this.uniforms['tColor'].value = readBuffer.texture;\n    this.uniforms['nearClip'].value = this.camera.near;\n    this.uniforms['farClip'].value = this.camera.far;\n\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer);\n      renderer.clear();\n      this.fsQuad.render(renderer);\n    }\n\n    this.scene.overrideMaterial = null;\n    renderer.setClearColor(this._oldClearColor);\n    renderer.setClearAlpha(oldClearAlpha);\n    renderer.autoClear = oldAutoClear;\n  }\n\n}\n\nexport { BokehPass };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}