{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node from '../core/Node.js';\nimport LightNode from './LightNode.js';\nvar sortLights = function sortLights(lights) {\n  return lights.sort(function (a, b) {\n    return a.id - b.id;\n  });\n};\nvar LightsNode = /*#__PURE__*/function (_Node) {\n  _inherits(LightsNode, _Node);\n  var _super = _createSuper(LightsNode);\n  function LightsNode() {\n    var _this;\n    var lightNodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    _classCallCheck(this, LightsNode);\n    _this = _super.call(this, 'vec3');\n    _this.lightNodes = lightNodes;\n    _this._hash = null;\n    return _this;\n  }\n  _createClass(LightsNode, [{\n    key: \"hasLight\",\n    get: function get() {\n      return this.lightNodes.length > 0;\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      var lightNodes = this.lightNodes;\n      var _iterator = _createForOfIteratorHelper(lightNodes),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var lightNode = _step.value;\n          lightNode.build(builder);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return 'vec3( 0.0 )';\n    }\n  }, {\n    key: \"getHash\",\n    value: function getHash() {\n      if (this._hash === null) {\n        var hash = '';\n        var lightNodes = this.lightNodes;\n        var _iterator2 = _createForOfIteratorHelper(lightNodes),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var lightNode = _step2.value;\n            hash += lightNode.light.uuid + ' ';\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        this._hash = hash;\n      }\n      return this._hash;\n    }\n  }, {\n    key: \"getLightNodeByHash\",\n    value: function getLightNodeByHash(hash) {\n      var lightNodes = this.lightNodes;\n      var _iterator3 = _createForOfIteratorHelper(lightNodes),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var lightNode = _step3.value;\n          if (lightNode.light.uuid === hash) {\n            return lightNode;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      return null;\n    }\n  }, {\n    key: \"fromLights\",\n    value: function fromLights(lights) {\n      var lightNodes = [];\n      lights = sortLights(lights);\n      var _iterator4 = _createForOfIteratorHelper(lights),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var light = _step4.value;\n          var lightNode = this.getLightNodeByHash(light.uuid);\n          if (lightNode === null) {\n            lightNode = new LightNode(light);\n          }\n          lightNodes.push(lightNode);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      this.lightNodes = lightNodes;\n      this._hash = null;\n      return this;\n    }\n  }]);\n  return LightsNode;\n}(Node);\nexport default LightsNode;","map":{"version":3,"names":["Node","LightNode","sortLights","lights","sort","a","b","id","LightsNode","lightNodes","_hash","length","builder","lightNode","build","hash","light","uuid","getLightNodeByHash","push"],"sources":["/Users/trudypainter/Desktop/latent-2/frontend/node_modules/three-stdlib/nodes/lights/LightsNode.js"],"sourcesContent":["import Node from '../core/Node.js';\nimport LightNode from './LightNode.js';\n\nconst sortLights = lights => {\n  return lights.sort((a, b) => a.id - b.id);\n};\n\nclass LightsNode extends Node {\n  constructor(lightNodes = []) {\n    super('vec3');\n    this.lightNodes = lightNodes;\n    this._hash = null;\n  }\n\n  get hasLight() {\n    return this.lightNodes.length > 0;\n  }\n\n  generate(builder) {\n    const lightNodes = this.lightNodes;\n\n    for (const lightNode of lightNodes) {\n      lightNode.build(builder);\n    }\n\n    return 'vec3( 0.0 )';\n  }\n\n  getHash() {\n    if (this._hash === null) {\n      let hash = '';\n      const lightNodes = this.lightNodes;\n\n      for (const lightNode of lightNodes) {\n        hash += lightNode.light.uuid + ' ';\n      }\n\n      this._hash = hash;\n    }\n\n    return this._hash;\n  }\n\n  getLightNodeByHash(hash) {\n    const lightNodes = this.lightNodes;\n\n    for (const lightNode of lightNodes) {\n      if (lightNode.light.uuid === hash) {\n        return lightNode;\n      }\n    }\n\n    return null;\n  }\n\n  fromLights(lights) {\n    const lightNodes = [];\n    lights = sortLights(lights);\n\n    for (const light of lights) {\n      let lightNode = this.getLightNodeByHash(light.uuid);\n\n      if (lightNode === null) {\n        lightNode = new LightNode(light);\n      }\n\n      lightNodes.push(lightNode);\n    }\n\n    this.lightNodes = lightNodes;\n    this._hash = null;\n    return this;\n  }\n\n}\n\nexport default LightsNode;\n"],"mappings":";;;;;AAAA,OAAOA,IAAI,MAAM,iBAAiB;AAClC,OAAOC,SAAS,MAAM,gBAAgB;AAEtC,IAAMC,UAAU,GAAG,SAAbA,UAAU,CAAGC,MAAM,EAAI;EAC3B,OAAOA,MAAM,CAACC,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;IAAA,OAAKD,CAAC,CAACE,EAAE,GAAGD,CAAC,CAACC,EAAE;EAAA,EAAC;AAC3C,CAAC;AAAC,IAEIC,UAAU;EAAA;EAAA;EACd,sBAA6B;IAAA;IAAA,IAAjBC,UAAU,uEAAG,EAAE;IAAA;IACzB,0BAAM,MAAM;IACZ,MAAKA,UAAU,GAAGA,UAAU;IAC5B,MAAKC,KAAK,GAAG,IAAI;IAAC;EACpB;EAAC;IAAA;IAAA,KAED,eAAe;MACb,OAAO,IAAI,CAACD,UAAU,CAACE,MAAM,GAAG,CAAC;IACnC;EAAC;IAAA;IAAA,OAED,kBAASC,OAAO,EAAE;MAChB,IAAMH,UAAU,GAAG,IAAI,CAACA,UAAU;MAAC,2CAEXA,UAAU;QAAA;MAAA;QAAlC,oDAAoC;UAAA,IAAzBI,SAAS;UAClBA,SAAS,CAACC,KAAK,CAACF,OAAO,CAAC;QAC1B;MAAC;QAAA;MAAA;QAAA;MAAA;MAED,OAAO,aAAa;IACtB;EAAC;IAAA;IAAA,OAED,mBAAU;MACR,IAAI,IAAI,CAACF,KAAK,KAAK,IAAI,EAAE;QACvB,IAAIK,IAAI,GAAG,EAAE;QACb,IAAMN,UAAU,GAAG,IAAI,CAACA,UAAU;QAAC,4CAEXA,UAAU;UAAA;QAAA;UAAlC,uDAAoC;YAAA,IAAzBI,SAAS;YAClBE,IAAI,IAAIF,SAAS,CAACG,KAAK,CAACC,IAAI,GAAG,GAAG;UACpC;QAAC;UAAA;QAAA;UAAA;QAAA;QAED,IAAI,CAACP,KAAK,GAAGK,IAAI;MACnB;MAEA,OAAO,IAAI,CAACL,KAAK;IACnB;EAAC;IAAA;IAAA,OAED,4BAAmBK,IAAI,EAAE;MACvB,IAAMN,UAAU,GAAG,IAAI,CAACA,UAAU;MAAC,4CAEXA,UAAU;QAAA;MAAA;QAAlC,uDAAoC;UAAA,IAAzBI,SAAS;UAClB,IAAIA,SAAS,CAACG,KAAK,CAACC,IAAI,KAAKF,IAAI,EAAE;YACjC,OAAOF,SAAS;UAClB;QACF;MAAC;QAAA;MAAA;QAAA;MAAA;MAED,OAAO,IAAI;IACb;EAAC;IAAA;IAAA,OAED,oBAAWV,MAAM,EAAE;MACjB,IAAMM,UAAU,GAAG,EAAE;MACrBN,MAAM,GAAGD,UAAU,CAACC,MAAM,CAAC;MAAC,4CAERA,MAAM;QAAA;MAAA;QAA1B,uDAA4B;UAAA,IAAjBa,KAAK;UACd,IAAIH,SAAS,GAAG,IAAI,CAACK,kBAAkB,CAACF,KAAK,CAACC,IAAI,CAAC;UAEnD,IAAIJ,SAAS,KAAK,IAAI,EAAE;YACtBA,SAAS,GAAG,IAAIZ,SAAS,CAACe,KAAK,CAAC;UAClC;UAEAP,UAAU,CAACU,IAAI,CAACN,SAAS,CAAC;QAC5B;MAAC;QAAA;MAAA;QAAA;MAAA;MAED,IAAI,CAACJ,UAAU,GAAGA,UAAU;MAC5B,IAAI,CAACC,KAAK,GAAG,IAAI;MACjB,OAAO,IAAI;IACb;EAAC;EAAA;AAAA,EAjEsBV,IAAI;AAqE7B,eAAeQ,UAAU"},"metadata":{},"sourceType":"module"}