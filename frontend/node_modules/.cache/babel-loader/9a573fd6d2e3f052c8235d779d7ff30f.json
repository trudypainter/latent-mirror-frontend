{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\nconst presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\nfunction Stage(_ref) {\n  let {\n    children,\n    controls,\n    shadows = true,\n    adjustCamera = true,\n    environment = 'city',\n    intensity = 1,\n    preset = 'rembrandt',\n    shadowBias = 0,\n    contactShadow = {\n      blur: 2,\n      opacity: 0.5,\n      position: [0, 0, 0]\n    },\n    ...props\n  } = _ref;\n  const config = presets[preset];\n  const camera = useThree(state => state.camera); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  const defaultControls = useThree(state => state.controls);\n  const outer = React.useRef(null);\n  const inner = React.useRef(null);\n  const [{\n    radius,\n    width,\n    height\n  }, set] = React.useState({\n    radius: 0,\n    width: 0,\n    height: 0\n  });\n  React.useLayoutEffect(() => {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    const box3 = new THREE.Box3().setFromObject(inner.current);\n    const center = new THREE.Vector3();\n    const sphere = new THREE.Sphere();\n    const height = box3.max.y - box3.min.y;\n    const width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width,\n      height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  React.useLayoutEffect(() => {\n    if (adjustCamera) {\n      const y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n      const ctrl = defaultControls || (controls == null ? void 0 : controls.current);\n      if (ctrl) {\n        ctrl.target.set(0, y, 0);\n        ctrl.update();\n      }\n    }\n  }, [defaultControls, radius, height, width, adjustCamera]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/React.createElement(ContactShadows, _extends({\n    scale: radius * 2,\n    far: radius / 2\n  }, contactShadow)), environment && /*#__PURE__*/React.createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/React.createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/React.createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\nexport { Stage };","map":{"version":3,"names":["_extends","React","THREE","useThree","Environment","ContactShadows","presets","rembrandt","main","fill","portrait","upfront","soft","Stage","children","controls","shadows","adjustCamera","environment","intensity","preset","shadowBias","contactShadow","blur","opacity","position","props","config","camera","state","defaultControls","outer","useRef","inner","radius","width","height","set","useState","useLayoutEffect","current","updateWorldMatrix","box3","Box3","setFromObject","center","Vector3","sphere","Sphere","max","y","min","x","getCenter","getBoundingSphere","z","near","far","Math","lookAt","ctrl","target","update","createElement","ref","scale","penumbra","castShadow"],"sources":["/Users/trudypainter/Desktop/latent internet mirror/frontend/node_modules/@react-three/drei/core/Stage.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\n\nconst presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\nfunction Stage({\n  children,\n  controls,\n  shadows = true,\n  adjustCamera = true,\n  environment = 'city',\n  intensity = 1,\n  preset = 'rembrandt',\n  shadowBias = 0,\n  contactShadow = {\n    blur: 2,\n    opacity: 0.5,\n    position: [0, 0, 0]\n  },\n  ...props\n}) {\n  const config = presets[preset];\n  const camera = useThree(state => state.camera); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  const defaultControls = useThree(state => state.controls);\n  const outer = React.useRef(null);\n  const inner = React.useRef(null);\n  const [{\n    radius,\n    width,\n    height\n  }, set] = React.useState({\n    radius: 0,\n    width: 0,\n    height: 0\n  });\n  React.useLayoutEffect(() => {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    const box3 = new THREE.Box3().setFromObject(inner.current);\n    const center = new THREE.Vector3();\n    const sphere = new THREE.Sphere();\n    const height = box3.max.y - box3.min.y;\n    const width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width,\n      height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  React.useLayoutEffect(() => {\n    if (adjustCamera) {\n      const y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n      const ctrl = defaultControls || (controls == null ? void 0 : controls.current);\n\n      if (ctrl) {\n        ctrl.target.set(0, y, 0);\n        ctrl.update();\n      }\n    }\n  }, [defaultControls, radius, height, width, adjustCamera]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/React.createElement(ContactShadows, _extends({\n    scale: radius * 2,\n    far: radius / 2\n  }, contactShadow)), environment && /*#__PURE__*/React.createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/React.createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/React.createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\n\nexport { Stage };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}