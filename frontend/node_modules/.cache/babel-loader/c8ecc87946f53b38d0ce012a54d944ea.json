{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/trudypainter/Desktop/latent-2/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { ShaderMaterial, Material } from 'three';\nimport { getNodesKeys } from '../core/NodeUtils.js';\nvar NodeMaterial = /*#__PURE__*/function (_ShaderMaterial) {\n  _inherits(NodeMaterial, _ShaderMaterial);\n  var _super = _createSuper(NodeMaterial);\n  function NodeMaterial() {\n    var _this;\n    _classCallCheck(this, NodeMaterial);\n    _this = _super.call(this);\n    _this.type = _this.constructor.name;\n    _this.lights = true;\n    return _this;\n  }\n  _createClass(NodeMaterial, [{\n    key: \"setDefaultValues\",\n    value: function setDefaultValues(values) {\n      // This approach is to reuse the native refreshUniforms*\n      // and turn available the use of features like transmission and environment in core\n      var value;\n      for (var property in values) {\n        value = values[property];\n        if (this[property] === undefined) {\n          if (value && typeof value.clone === 'function') {\n            this[property] = value.clone();\n          } else {\n            this[property] = value;\n          }\n        }\n      }\n      Object.assign(this.defines, values.defines);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var isRoot = meta === undefined || typeof meta === 'string';\n      if (isRoot) {\n        meta = {\n          textures: {},\n          images: {},\n          nodes: {}\n        };\n      }\n      var data = Material.prototype.toJSON.call(this, meta);\n      var nodeKeys = getNodesKeys(this);\n      data.inputNodes = {};\n      var _iterator = _createForOfIteratorHelper(nodeKeys),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var name = _step.value;\n          data.inputNodes[name] = this[name].toJSON(meta).uuid;\n        } // TODO: Copied from Object3D.toJSON\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      function extractFromCache(cache) {\n        var values = [];\n        for (var key in cache) {\n          var _data = cache[key];\n          delete _data.metadata;\n          values.push(_data);\n        }\n        return values;\n      }\n      if (isRoot) {\n        var textures = extractFromCache(meta.textures);\n        var images = extractFromCache(meta.images);\n        var nodes = extractFromCache(meta.nodes);\n        if (textures.length > 0) data.textures = textures;\n        if (images.length > 0) data.images = images;\n        if (nodes.length > 0) data.nodes = nodes;\n      }\n      return data;\n    }\n  }]);\n  return NodeMaterial;\n}(ShaderMaterial);\nNodeMaterial.prototype.isNodeMaterial = true;\nexport default NodeMaterial;","map":{"version":3,"names":["ShaderMaterial","Material","getNodesKeys","NodeMaterial","type","constructor","name","lights","values","value","property","undefined","clone","Object","assign","defines","meta","isRoot","textures","images","nodes","data","prototype","toJSON","call","nodeKeys","inputNodes","uuid","extractFromCache","cache","key","metadata","push","length","isNodeMaterial"],"sources":["/Users/trudypainter/Desktop/latent-2/frontend/node_modules/three-stdlib/nodes/materials/NodeMaterial.js"],"sourcesContent":["import { ShaderMaterial, Material } from 'three';\nimport { getNodesKeys } from '../core/NodeUtils.js';\n\nclass NodeMaterial extends ShaderMaterial {\n  constructor() {\n    super();\n    this.type = this.constructor.name;\n    this.lights = true;\n  }\n\n  setDefaultValues(values) {\n    // This approach is to reuse the native refreshUniforms*\n    // and turn available the use of features like transmission and environment in core\n    let value;\n\n    for (const property in values) {\n      value = values[property];\n\n      if (this[property] === undefined) {\n        if (value && typeof value.clone === 'function') {\n          this[property] = value.clone();\n        } else {\n          this[property] = value;\n        }\n      }\n    }\n\n    Object.assign(this.defines, values.defines);\n  }\n\n  toJSON(meta) {\n    const isRoot = meta === undefined || typeof meta === 'string';\n\n    if (isRoot) {\n      meta = {\n        textures: {},\n        images: {},\n        nodes: {}\n      };\n    }\n\n    const data = Material.prototype.toJSON.call(this, meta);\n    const nodeKeys = getNodesKeys(this);\n    data.inputNodes = {};\n\n    for (const name of nodeKeys) {\n      data.inputNodes[name] = this[name].toJSON(meta).uuid;\n    } // TODO: Copied from Object3D.toJSON\n\n\n    function extractFromCache(cache) {\n      const values = [];\n\n      for (const key in cache) {\n        const data = cache[key];\n        delete data.metadata;\n        values.push(data);\n      }\n\n      return values;\n    }\n\n    if (isRoot) {\n      const textures = extractFromCache(meta.textures);\n      const images = extractFromCache(meta.images);\n      const nodes = extractFromCache(meta.nodes);\n      if (textures.length > 0) data.textures = textures;\n      if (images.length > 0) data.images = images;\n      if (nodes.length > 0) data.nodes = nodes;\n    }\n\n    return data;\n  }\n\n}\n\nNodeMaterial.prototype.isNodeMaterial = true;\n\nexport default NodeMaterial;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}